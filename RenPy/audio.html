<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>音频 &#8212; Ren&#39;Py 中文文档</title>
    <link rel="stylesheet" href="_static/renpydoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="影片" href="movie.html" />
    <link rel="prev" title="条件语句" href="conditional.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          Ren&#39;Py 中文文档</a>
        <span class="navbar-text navbar-version pull-left"><b>7.0.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="https://www.renpy.org">官方主页</a></li>
                <li><a href="https://www.renpy.cn/forum.php/">Ren&#39;Py中文空间</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">快速入门</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui.html">GUI(图形用户接口)定制化指导</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="language_basics.html">编程语言基础</a></li>
<li class="toctree-l1"><a class="reference internal" href="label.html">脚本标签(label)和主控流程</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogue.html">对话(dialogue)和旁白(narration)</a></li>
<li class="toctree-l1"><a class="reference internal" href="displaying_images.html">显示图像</a></li>
<li class="toctree-l1"><a class="reference internal" href="menus.html">游戏内菜单</a></li>
<li class="toctree-l1"><a class="reference internal" href="python.html">Python语句</a></li>
<li class="toctree-l1"><a class="reference internal" href="conditional.html">条件语句</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">音频</a></li>
<li class="toctree-l1"><a class="reference internal" href="movie.html">影片</a></li>
<li class="toctree-l1"><a class="reference internal" href="voice.html">语音</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="text.html">文本</a></li>
<li class="toctree-l1"><a class="reference internal" href="translation.html">多语言支持</a></li>
<li class="toctree-l1"><a class="reference internal" href="displayables.html">可视组件</a></li>
<li class="toctree-l1"><a class="reference internal" href="transforms.html">变换</a></li>
<li class="toctree-l1"><a class="reference internal" href="transitions.html">转场(transition)</a></li>
<li class="toctree-l1"><a class="reference internal" href="atl.html">动画和变换语言</a></li>
<li class="toctree-l1"><a class="reference internal" href="layeredimage.html">层叠式图像</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="style.html">样式(style)</a></li>
<li class="toctree-l1"><a class="reference internal" href="style_properties.html">样式特性(property)</a></li>
<li class="toctree-l1"><a class="reference internal" href="screens.html">界面和界面语言</a></li>
<li class="toctree-l1"><a class="reference internal" href="screen_actions.html">界面动作(action)、值(value)和函数</a></li>
<li class="toctree-l1"><a class="reference internal" href="screen_special.html">特殊界面名称</a></li>
<li class="toctree-l1"><a class="reference internal" href="screen_optimization.html">界面语言优化</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">配置项变量</a></li>
<li class="toctree-l1"><a class="reference internal" href="preferences.html">环境设定配置</a></li>
<li class="toctree-l1"><a class="reference internal" href="store_variables.html">存储区配置项</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="developer_tools.html">开发者工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="director.html">交互式指导器(interactive director)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="nvl_mode.html">NVL模式教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="input.html">文本输入</a></li>
<li class="toctree-l1"><a class="reference internal" href="side_image.html">头像</a></li>
<li class="toctree-l1"><a class="reference internal" href="rooms.html">画廊、音乐空间和场景回放</a></li>
<li class="toctree-l1"><a class="reference internal" href="drag_drop.html">拖放组件</a></li>
<li class="toctree-l1"><a class="reference internal" href="sprites.html">精灵(sprite)</a></li>
<li class="toctree-l1"><a class="reference internal" href="keymap.html">定制按键映射</a></li>
<li class="toctree-l1"><a class="reference internal" href="achievement.html">成就</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">对话历史</a></li>
<li class="toctree-l1"><a class="reference internal" href="multiple.html">多角色对话</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="statement_equivalents.html">等效语句</a></li>
<li class="toctree-l1"><a class="reference internal" href="save_load_rollback.html">存档、读档和回滚</a></li>
<li class="toctree-l1"><a class="reference internal" href="persistent.html">持久化数据</a></li>
<li class="toctree-l1"><a class="reference internal" href="trans_trans_python.html">Python中的变换(transform)和转场(transition)</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui_advanced.html">高级GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="screen_python.html">界面与Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="modes.html">模式</a></li>
<li class="toctree-l1"><a class="reference internal" href="udd.html">创作者定义的可视组件</a></li>
<li class="toctree-l1"><a class="reference internal" href="cds.html">创作者定义的语句</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_text_tags.html">定制文本标签</a></li>
<li class="toctree-l1"><a class="reference internal" href="character_callbacks.html">角色回调函数</a></li>
<li class="toctree-l1"><a class="reference internal" href="file_python.html">文件读写</a></li>
<li class="toctree-l1"><a class="reference internal" href="color_class.html">Color类</a></li>
<li class="toctree-l1"><a class="reference internal" href="other.html">其他函数和配置变量</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="build.html">生成分发版</a></li>
<li class="toctree-l1"><a class="reference internal" href="updater.html">web更新器</a></li>
<li class="toctree-l1"><a class="reference internal" href="android.html">安卓(Android)</a></li>
<li class="toctree-l1"><a class="reference internal" href="chromeos.html">Chrome OS/Chrome浏览器</a></li>
<li class="toctree-l1"><a class="reference internal" href="ios.html">iOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="iap.html">程序内购</a></li>
<li class="toctree-l1"><a class="reference internal" href="gesture.html">手势</a></li>
<li class="toctree-l1"><a class="reference internal" href="raspi.html">树莓派</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="problems.html">处理故障</a></li>
<li class="toctree-l1"><a class="reference internal" href="environment_variables.html">环境变量</a></li>
<li class="toctree-l1"><a class="reference internal" href="self_voicing.html">自动语音</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="editor.html">集成文本编辑器</a></li>
<li class="toctree-l1"><a class="reference internal" href="skins.html">皮肤</a></li>
<li class="toctree-l1"><a class="reference internal" href="translating_renpy.html">Ren’Py多语言支持</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">完整变更日志</a></li>
<li class="toctree-l1"><a class="reference internal" href="incompatible.html">Incompatible Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="distributor.html">Distributor Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="sponsors.html">Ren’Py Development Sponsors</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="thequestion.html">Script of The Question</a></li>
<li class="toctree-l1"><a class="reference internal" href="thequestion_nvl.html">NVL-模式 “The Question” 脚本</a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="搜索" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">音频</a><ul>
<li><a class="reference internal" href="#play">play语句</a></li>
<li><a class="reference internal" href="#stop">stop语句</a></li>
<li><a class="reference internal" href="#queue">queue语句</a></li>
<li><a class="reference internal" href="#partial-playback">节选播放</a></li>
<li><a class="reference internal" href="#playing-silence">播放静音</a></li>
<li><a class="reference internal" href="#audio-namespace">音频命名空间</a></li>
<li><a class="reference internal" href="#functions">相关函数</a></li>
<li><a class="reference internal" href="#sound-functions">音效函数</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="audio">
<span id="id1"></span><h1>音频<a class="headerlink" href="#audio" title="Permalink to this headline"> link</a></h1>
<p>Ren’Py支持在后台播放音乐和音效，支持的音频文件格式如下：</p>
<ul class="simple">
<li>OPUS</li>
<li>OGG Vorbis</li>
<li>MP3</li>
<li>WAV (只有未压缩的PCM编码格式)</li>
</ul>
<p>Ren’Py支持任意数量的音频通道。有三种一般音频通道是默认定义好的：</p>
<ul class="simple">
<li>music - 音乐播放通道。</li>
<li>sound - 音效播放通道。</li>
<li>voice - 语音播放通道。</li>
</ul>
<p>通用通道支持音频的播放和音频队列，但同一时间只能播放1个音频文件。可以使用
<a class="reference internal" href="#renpy.music.register_channel" title="renpy.music.register_channel"><code class="xref py py-func docutils literal notranslate"><span class="pre">renpy.music.register_channel()</span></code></a> 函数注册新的通用通道。</p>
<p>游戏内自定义配置菜单中的“音乐音量”、“音效音量”和“语音音量”设置的值，会应用于以上对应的音频通道。</p>
<p>另外，除了通用通道，还存在特殊音频通道 <code class="docutils literal notranslate"><span class="pre">audio</span></code> 。audio通道支持同时播放多个音频文件，但不支持队列播放和中途停止。</p>
<p>音效的用途，包括按钮(button)、菜单选项、图片地图(imagemap)的鼠标悬停和激活状态。详见
<a class="reference internal" href="style_properties.html#button-style-properties"><span class="std std-ref">按钮样式属性</span></a>. 两个配置项， <a class="reference internal" href="config.html#var-config.main_menu_music"><code class="xref std std-var docutils literal notranslate"><span class="pre">config.main_menu_music</span></code></a> 和 <a class="reference internal" href="config.html#var-config.game_menu_music"><code class="xref std std-var docutils literal notranslate"><span class="pre">config.game_menu_music</span></code></a> ，分别对应主菜单和游戏菜单播放的音乐。</p>
<p>游戏内播放音乐和音效的常用办法，是使用Ren’Py的三种音乐/音效语句。</p>
<div class="section" id="play">
<span id="play-statement"></span><h2>play语句<a class="headerlink" href="#play" title="Permalink to this headline"> link</a></h2>
<p>play语句用于播放音效和音乐。如果某个文件正在通过通用通道播放，播放会被中断，并开始播放新的文件。</p>
<p>音频通道名(通常就是“sound”、“music”、“voice”或者“audio”)需要跟在关键词 <code class="docutils literal notranslate"><span class="pre">play</span></code> 后面。通道名后面是音频文件。音频文件可以是单个文件，也可以是文件列表。如果是文件列表的话，列表内元素顺序播放。</p>
<p><code class="docutils literal notranslate"><span class="pre">fadein</span></code> 和 <code class="docutils literal notranslate"><span class="pre">fadeout</span></code> 分句是可选的。 fadeout指定了正在播放音乐需要停止时的淡出时间，单位为秒。fadein指定了播放新音乐的开头淡入时间。如果没有fadeout时间没有指定，就是用config.fade_music的配置值。</p>
<p><code class="docutils literal notranslate"><span class="pre">loop</span></code> 和 <code class="docutils literal notranslate"><span class="pre">noloop</span></code> 分句也是可选的。 loop分句表示音乐循环播放，noloop分句表示音乐只播放一次。如果这两个分句都没有出现，根据通道的默认配置决定实际播放情况。</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">play</span> <span class="k">music</span> <span class="s2">&quot;mozart.ogg&quot;</span>
<span class="k">play</span> <span class="k">sound</span> <span class="s2">&quot;woof.mp3&quot;</span>
<span class="k">play</span> <span class="n">myChannel</span> <span class="s2">&quot;punch.wav&quot;</span> <span class="c1"># &#39;myChannel&#39;需要先使用renpy.music.register_channel()定义。</span>

<span class="s2">&quot;我们也可以播放一个音效或音乐的列表。&quot;</span>
<span class="k">play</span> <span class="k">music</span> <span class="p">[</span> <span class="s2">&quot;a.ogg&quot;</span><span class="p">,</span> <span class="s2">&quot;b.ogg&quot;</span> <span class="p">]</span> <span class="n">fadeout</span> <span class="mf">1.0</span> <span class="n">fadein</span> <span class="mf">1.0</span>
</pre></div>
</div>
<p>在audio通道上，同时播放多个音效文件：</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">play</span> <span class="n">audio</span> <span class="s2">&quot;sfx1.opus&quot;</span>
<span class="k">play</span> <span class="n">audio</span> <span class="s2">&quot;sfx2.opus&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="stop">
<span id="stop-statement"></span><h2>stop语句<a class="headerlink" href="#stop" title="Permalink to this headline"> link</a></h2>
<p>stop语句以关键词 <code class="docutils literal notranslate"><span class="pre">stop</span></code> 开头，后面跟需要静音的音频通道名。最后有一个可选的 <code class="docutils literal notranslate"><span class="pre">fadeout</span></code> 分句。</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">stop</span> <span class="k">sound</span>
<span class="k">stop</span> <span class="k">music</span> <span class="n">fadeout</span> <span class="mf">1.0</span>
</pre></div>
</div>
</div>
<div class="section" id="queue">
<span id="queue-statement"></span><h2>queue语句<a class="headerlink" href="#queue" title="Permalink to this headline"> link</a></h2>
<p>queue语句用于组建音频文件队列。当前播放的文件被播放完毕之后，queue语句组建的音频文件队列就会开始播放。</p>
<p>queue语句以关键词 <code class="docutils literal notranslate"><span class="pre">queue</span></code> 开头，后面跟播放使用的音频通道名。最后是否带 <code class="docutils literal notranslate"><span class="pre">loop</span></code> 或 <code class="docutils literal notranslate"><span class="pre">noloop</span></code> 分句是可选的。</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">queue</span> <span class="k">sound</span> <span class="s2">&quot;woof.ogg&quot;</span>
<span class="k">queue</span> <span class="k">music</span> <span class="p">[</span> <span class="s2">&quot;a.ogg&quot;</span><span class="p">,</span> <span class="s2">&quot;b.ogg&quot;</span> <span class="p">]</span>
</pre></div>
</div>
<p>使用这些语句的优点是，当lint工具运行时，可以检测出你程序中是否有丢失的音乐音效文件。后面的一些函数允许python接入和控制这些文件，并且会揭示一些高级(却很少用到)的特性。</p>
</div>
<div class="section" id="partial-playback">
<span id="id2"></span><h2>节选播放<a class="headerlink" href="#partial-playback" title="Permalink to this headline"> link</a></h2>
<p>Ren’Py支持节选播放音频文件。节选播放的语法是，在play语句的文件名之前，加上用英文尖括号&lt;&gt;包含的播放起始点。节选播放规范应该包含成对属性名和属性值，并用空格分隔。</p>
<p>属性值以秒为单位，集成在文件名前面的英文尖括号&lt;&gt;内。三种属性名分别为：</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">from</span></code></dt>
<dd>指定播放文件的起始时间点。(默认值为0.0秒)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">to</span></code></dt>
<dd>指定播放文件的终止时间点。(默认值为文件结束。)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">loop</span></code></dt>
<dd>指定需要循环播放的文件起始和终止时间点。(默认的起始时间点为文件开头或 <code class="docutils literal notranslate"><span class="pre">from</span></code> 指定的时间点。)</dd>
</dl>
<p>举例：</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">play</span> <span class="k">music</span> <span class="s2">&quot;&lt;from 5 to 15.5&gt;waves.opus&quot;</span>
</pre></div>
</div>
<p>将从5秒的标记处开始，播放总计10.5秒waves.opus文件内容。下面这条语句：</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">play</span> <span class="k">music</span> <span class="s2">&quot;&lt;loop 6.333&gt;song.opus&quot;</span>
</pre></div>
</div>
<p>将会在完整播放完文件song.opus后，回到6.333秒标记处重新播放至结尾，并不断循环重复。</p>
</div>
<div class="section" id="playing-silence">
<span id="id3"></span><h2>播放静音<a class="headerlink" href="#playing-silence" title="Permalink to this headline"> link</a></h2>
<p>一段指定时间范围播放静音，格式类似“&lt;silence 3.0&gt;”，其中3.0表示需要的静音持续时间，单位为秒。播放静音用于延迟音效文件的播放点。例如：</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">play</span> <span class="n">audio</span> <span class="p">[</span> <span class="s2">&quot;&lt;silence .5&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;boom.opus&quot;</span> <span class="p">]</span>
</pre></div>
</div>
<p>将播放半秒的静音，然后出现一个爆炸音效。</p>
</div>
<div class="section" id="audio-namespace">
<span id="id4"></span><h2>音频命名空间<a class="headerlink" href="#audio-namespace" title="Permalink to this headline"> link</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">play</span></code> 和 <code class="docutils literal notranslate"><span class="pre">queue</span></code> 语句在音频命名空间内计算入参的值。这意味着可以使用define语句，为音频文件提供一个别名(alias)。</p>
<p>例如，我们可以这样写：</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">define</span> <span class="n">audio</span><span class="o">.</span><span class="n">sunflower</span> <span class="o">=</span> <span class="s2">&quot;music/sun-flower-slow-jam.ogg&quot;</span>
</pre></div>
</div>
<p>然后这样使用：</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">play</span> <span class="k">music</span> <span class="n">sunflower</span>
</pre></div>
</div>
</div>
<div class="section" id="functions">
<span id="id5"></span><h2>相关函数<a class="headerlink" href="#functions" title="Permalink to this headline"> link</a></h2>
<dl class="function">
<dt id="renpy.play">
<code class="descclassname">renpy.</code><code class="descname">play</code><span class="sig-paren">(</span><em>filename</em>, <em>channel=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.play" title="Permalink to this definition"> link</a></dt>
<dd><p>播放一个音效。如果channel为None，默认值为config.play_channel。该函数用在各种样式(style)定义，鼠标悬停声(hover_sound)和激活声(activate_sound)。</p>
</dd></dl>

<dl class="function">
<dt id="renpy.seen_audio">
<code class="descclassname">renpy.</code><code class="descname">seen_audio</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.seen_audio" title="Permalink to this definition"> link</a></dt>
<dd><p>如果filename对应的音频文件在用户系统中至少被播放过一次，则返回True。</p>
</dd></dl>

<dl class="function">
<dt id="renpy.music.get_duration">
<code class="descclassname">renpy.music.</code><code class="descname">get_duration</code><span class="sig-paren">(</span><em>channel='music'</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.music.get_duration" title="Permalink to this definition"> link</a></dt>
<dd><p>返回目前 <em>channel</em> 通道上正在播放的音频或视频文件的全长。若 <em>channel</em> 通道上没有正在播放的文件，则返回0.0。</p>
</dd></dl>

<dl class="function">
<dt id="renpy.music.get_pause">
<code class="descclassname">renpy.music.</code><code class="descname">get_pause</code><span class="sig-paren">(</span><em>channel='music'</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.music.get_pause" title="Permalink to this definition"> link</a></dt>
<dd><p>返回 <em>channel</em> 通道上的pause标记的值。</p>
</dd></dl>

<dl class="function">
<dt id="renpy.music.get_playing">
<code class="descclassname">renpy.music.</code><code class="descname">get_playing</code><span class="sig-paren">(</span><em>channel='music'</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.music.get_playing" title="Permalink to this definition"> link</a></dt>
<dd><p>若入参channel上有音频正在播放，返回文件名。否则返回None。</p>
</dd></dl>

<dl class="function">
<dt id="renpy.music.get_pos">
<code class="descclassname">renpy.music.</code><code class="descname">get_pos</code><span class="sig-paren">(</span><em>channel='music'</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.music.get_pos" title="Permalink to this definition"> link</a></dt>
<dd><p>返回入参channel通道上正在播放的音频或者视频文件的已播放进度，单位为秒。如果 <em>channel</em> 通道上没有任何音频或视频文件正在播放，返回None。</p>
<p>由于在某个通道开始播放前，总是会返回None；也可能对应的音频通道已经被静音(mute)。该函数的调用者应该能够处理空值。</p>
</dd></dl>

<dl class="function">
<dt id="renpy.music.is_playing">
<code class="descclassname">renpy.music.</code><code class="descname">is_playing</code><span class="sig-paren">(</span><em>channel='music'</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.music.is_playing" title="Permalink to this definition"> link</a></dt>
<dd><p>若入参channel上正在播放一个音频则返回True，否则返回False。或者当声音系统没有工作的情况也返回False。</p>
</dd></dl>

<dl class="function">
<dt id="renpy.music.play">
<code class="descclassname">renpy.music.</code><code class="descname">play</code><span class="sig-paren">(</span><em>filenames</em>, <em>channel='music'</em>, <em>loop=None</em>, <em>fadeout=None</em>, <em>synchro_start=False</em>, <em>fadein=0</em>, <em>tight=None</em>, <em>if_changed=False</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.music.play" title="Permalink to this definition"> link</a></dt>
<dd><p>该函数会立即停止入参channel上正在播放的声音，解散音频队列，并开始播放入参filenames指定的文件。</p>
<p><strong>filenames</strong></p>
<blockquote>
<div>该值可以是单个文件，也可以是待播放的文件列表。</div></blockquote>
<p><strong>channel</strong></p>
<blockquote>
<div>播放声音使用的通道。</div></blockquote>
<p><strong>loop</strong></p>
<blockquote>
<div>若该值为True，音轨会循环播放，前提是其已经是播放队列最后一个音频。</div></blockquote>
<p><strong>fadeout</strong></p>
<blockquote>
<div>若不为空，这是一个淡出效果的持续时间，单位为秒。否则，淡出时间使用config.fade_music的值。</div></blockquote>
<p><strong>synchro_start</strong></p>
<blockquote>
<div>Ren’Py会确保所有synchro_start标志为True的通道，能够在几乎同一时间一齐开始播放音频。当我们需要两个音频文件相互同步时，synchro_start就应该被设置为True。</div></blockquote>
<p><strong>fadein</strong></p>
<blockquote>
<div>音频开始淡入效果持续时间，单位为秒，在循环播放时仅对第一遍播放有效。</div></blockquote>
<p><strong>tight</strong></p>
<blockquote>
<div>若该值为True，淡出效果将作用至同一个队列中后面的声音。若为空，当loop为True时tight也为True，否则为False。</div></blockquote>
<p><strong>if_changed</strong></p>
<blockquote>
<div>若该值为True，当前真在播放的音频不会被立刻停止/淡出，而会继续播放。</div></blockquote>
<p>该函数会清空对应通道上所有的pause标记。</p>
</dd></dl>

<dl class="function">
<dt id="renpy.music.queue">
<code class="descclassname">renpy.music.</code><code class="descname">queue</code><span class="sig-paren">(</span><em>filenames</em>, <em>channel='music'</em>, <em>loop=None</em>, <em>clear_queue=True</em>, <em>fadein=0</em>, <em>tight=None</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.music.queue" title="Permalink to this definition"> link</a></dt>
<dd><p>该函数将文件名为filenames的文件加入指定通道channel的播放队列。</p>
<p><strong>filenames</strong></p>
<blockquote>
<div>该值可以是单个文件，也可以是待播放的文件列表。</div></blockquote>
<p><strong>channel</strong></p>
<blockquote>
<div>播放声音使用的通道。</div></blockquote>
<p><strong>loop</strong></p>
<blockquote>
<div>若该值为True，音轨会循环播放，前提是其已经是播放队列最后一个音频。</div></blockquote>
<p><strong>clear_queue</strong></p>
<blockquote>
<div>若为True，当前播放文件结束后，播放队列中原有文件将被清空。若为False，新增文件会被加在原有队列结尾。无论实际哪种情况，如果当前没有任何音频正在播放，新队列中的音频都会立刻被播放。</div></blockquote>
<p><strong>fadein</strong></p>
<blockquote>
<div>音频开始淡入效果持续时间，单位为秒，在循环播放时仅对第一遍播放有效。</div></blockquote>
<p><strong>tight</strong></p>
<blockquote>
<div>若该值为True，淡出效果将作用至同一个队列中后面的声音。若为空，当loop为True时tight也为True，否则为False。</div></blockquote>
<p>该函数会清空对应通道上所有的pause标记。</p>
</dd></dl>

<dl class="function">
<dt id="renpy.music.register_channel">
<code class="descclassname">renpy.music.</code><code class="descname">register_channel</code><span class="sig-paren">(</span><em>name</em>, <em>mixer=None</em>, <em>loop=None</em>, <em>stop_on_mute=True</em>, <em>tight=False</em>, <em>file_prefix=''</em>, <em>file_suffix=''</em>, <em>buffer_queue=True</em>, <em>movie=False</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.music.register_channel" title="Permalink to this definition"> link</a></dt>
<dd><p>该函数用于注册新的名为入参name的音频通道。之后就可以使用play或queue语句在name通道上播放音频了。</p>
<p><strong>mixer</strong></p>
<blockquote>
<div>混合器(mixer)使用的通道名。默认情况下，Ren’Py能识别“music”、“sfx”和“voice”混合器。使用其他名称也是可行的，不过可能要修改个性化界面。</div></blockquote>
<p><strong>loop</strong></p>
<blockquote>
<div>若为True，在新注册通道上的音频默认循环播放。</div></blockquote>
<p><strong>stop_on_mute</strong></p>
<blockquote>
<div>若为True，当新注册通道被静音(mute)时，通道上所有音频都会停止播放。</div></blockquote>
<p><strong>tight</strong></p>
<blockquote>
<div>若为True，即使有淡出效果，依然可以循环播放。若要实现音效、音乐的无缝连接，就应该把这项设为True。若使用音乐的淡出效果则设置为False。</div></blockquote>
<p><strong>file_prefix</strong></p>
<blockquote>
<div>在该通道上播放的所有声音文件都会添加的文件名前缀。</div></blockquote>
<p><strong>file_suffix</strong></p>
<blockquote>
<div>在该通道上播放的所有声音文件都会添加的文件名后缀。</div></blockquote>
<p><strong>buffer_queue</strong></p>
<blockquote>
<div>我们是否应缓存一两个文件或者一个文件队列？如果通道是播放音频的话应该设置为True，如果播放视频的话应该设置为False。</div></blockquote>
<p><strong>movie</strong></p>
<blockquote>
<div>若值为True，该通道会被设为播放视频。</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="renpy.music.set_pan">
<code class="descclassname">renpy.music.</code><code class="descname">set_pan</code><span class="sig-paren">(</span><em>pan</em>, <em>delay</em>, <em>channel='music'</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.music.set_pan" title="Permalink to this definition"> link</a></dt>
<dd><p>设置该通道的声像(pan)。</p>
<p><strong>pan</strong></p>
<blockquote>
<div>控制音频的音源位置的一个值，位于-1至1的闭区间内。若该值为-1，所有音频使用左声道。若该值为0，左右声道均衡发声。若该值为1，所有音频使用右声道。</div></blockquote>
<p><strong>delay</strong></p>
<blockquote>
<div>为了形成声像使用的延迟时间。</div></blockquote>
<p><strong>channel</strong></p>
<blockquote>
<div>应用声像的通道名。可以是音乐或音效通道。通常使用通道7，也就是默认的音乐通道。</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="renpy.music.set_pause">
<code class="descclassname">renpy.music.</code><code class="descname">set_pause</code><span class="sig-paren">(</span><em>value</em>, <em>channel='music'</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.music.set_pause" title="Permalink to this definition"> link</a></dt>
<dd><p>将入参value赋值给通道名为channel的暂停标识。若value为True，通道会被暂停，否则正常播放。</p>
</dd></dl>

<dl class="function">
<dt id="renpy.music.set_queue_empty_callback">
<code class="descclassname">renpy.music.</code><code class="descname">set_queue_empty_callback</code><span class="sig-paren">(</span><em>callback</em>, <em>channel='music'</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.music.set_queue_empty_callback" title="Permalink to this definition"> link</a></dt>
<dd><p>该函数设置了一个callback函数，当播放队列为空时，将会调用callback函数。播放队列首次变空时callback函数将被调用，且每次会导致播放队列清空的互动行为都会至少调用一次。</p>
<p>callback函数被调用时不带任何参数。其会使用合适的参数调用renpy.music.queue，将声音组件成一个队列。请注意，某个声音在播放时callback就可能会被调用，因为当时待播放队列已经空了。</p>
</dd></dl>

<dl class="function">
<dt id="renpy.music.set_volume">
<code class="descclassname">renpy.music.</code><code class="descname">set_volume</code><span class="sig-paren">(</span><em>volume</em>, <em>delay=0</em>, <em>channel='music'</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.music.set_volume" title="Permalink to this definition"> link</a></dt>
<dd><p>设置通道的音量volume。对于控制多个通道的混合器(mixer)，该值表示混合器的一个音量分量。
Sets the volume of this channel, as a fraction of the volume of the mixer controlling the channel.</p>
<p><strong>volume</strong></p>
<blockquote>
<div>该值位于0.0至1.0的闭合区间。对于控制多个通道的混合器(mixer)，该值表示混合器的一个音量分量。</div></blockquote>
<p><strong>delay</strong></p>
<blockquote>
<div>该值代表一个时间量，用于新旧音量值切换/平滑过渡时的时延，单位为秒。该值会保存在存档中，并接受回滚操作。</div></blockquote>
<p><strong>channel</strong></p>
<blockquote>
<div>需要设置的通道名。</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="renpy.music.stop">
<code class="descclassname">renpy.music.</code><code class="descname">stop</code><span class="sig-paren">(</span><em>channel='music'</em>, <em>fadeout=None</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.music.stop" title="Permalink to this definition"> link</a></dt>
<dd><p>该函数停止正在播放的音乐，并解散播放队列。如果入参fadeout为None，使用config.fade_music配置值作为淡出效果时间，否则就是用fadeout入参值。</p>
<p>该函数将最后组建的待播放文件列表设置为None。</p>
<p><strong>channel</strong></p>
<blockquote>
<div>需要停止播放的通道名。</div></blockquote>
<p><strong>fadeout</strong></p>
<blockquote>
<div>若不为None，包含一个淡出效果时间，单位为秒。否则淡出时间取决于config.fade_music。</div></blockquote>
</dd></dl>

</div>
<div class="section" id="sound-functions">
<span id="id6"></span><h2>音效函数<a class="headerlink" href="#sound-functions" title="Permalink to this headline"> link</a></h2>
<p>大多数renpy.music函数在renpy.sound有别名(alias)。这些函数功能类似，主要差别在于它们默认作用于音效(sound)通道而不是音乐(music)通道，且默认不循环播放。</p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">返回顶部</a>
      
    </p>
    <p>
        &copy; Copyright 2012-2018, Tom Rothamel.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.<br/>
    </p>
  </div>
</footer>
  </body>
</html>