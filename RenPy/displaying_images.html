<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>显示图像 &#8212; Ren&#39;Py 中文文档</title>
    <link rel="stylesheet" href="_static/renpydoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="游戏内菜单" href="menus.html" />
    <link rel="prev" title="对话(dialogue)和旁白(narration)" href="dialogue.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          Ren&#39;Py 中文文档</a>
        <span class="navbar-text navbar-version pull-left"><b>7.0.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="https://www.renpy.org">官方主页</a></li>
                <li><a href="https://www.renpy.cn/forum.php/">Ren&#39;Py中文空间</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">快速入门</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui.html">GUI(图形用户接口)定制化指导</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="language_basics.html">编程语言基础</a></li>
<li class="toctree-l1"><a class="reference internal" href="label.html">脚本标签(label)和主控流程</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogue.html">对话(dialogue)和旁白(narration)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">显示图像</a></li>
<li class="toctree-l1"><a class="reference internal" href="menus.html">游戏内菜单</a></li>
<li class="toctree-l1"><a class="reference internal" href="python.html">Python语句</a></li>
<li class="toctree-l1"><a class="reference internal" href="conditional.html">条件语句</a></li>
<li class="toctree-l1"><a class="reference internal" href="audio.html">音频</a></li>
<li class="toctree-l1"><a class="reference internal" href="movie.html">影片</a></li>
<li class="toctree-l1"><a class="reference internal" href="voice.html">语音</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="text.html">文本</a></li>
<li class="toctree-l1"><a class="reference internal" href="translation.html">多语言支持</a></li>
<li class="toctree-l1"><a class="reference internal" href="displayables.html">可视组件</a></li>
<li class="toctree-l1"><a class="reference internal" href="transforms.html">变换</a></li>
<li class="toctree-l1"><a class="reference internal" href="transitions.html">转场(transition)</a></li>
<li class="toctree-l1"><a class="reference internal" href="atl.html">动画和变换语言</a></li>
<li class="toctree-l1"><a class="reference internal" href="layeredimage.html">层叠式图像</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="style.html">样式(style)</a></li>
<li class="toctree-l1"><a class="reference internal" href="style_properties.html">样式特性(property)</a></li>
<li class="toctree-l1"><a class="reference internal" href="screens.html">界面和界面语言</a></li>
<li class="toctree-l1"><a class="reference internal" href="screen_actions.html">界面动作(action)、值(value)和函数</a></li>
<li class="toctree-l1"><a class="reference internal" href="screen_special.html">特殊界面名称</a></li>
<li class="toctree-l1"><a class="reference internal" href="screen_optimization.html">界面语言优化</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">配置项变量</a></li>
<li class="toctree-l1"><a class="reference internal" href="preferences.html">环境设定配置</a></li>
<li class="toctree-l1"><a class="reference internal" href="store_variables.html">存储区配置项</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="developer_tools.html">开发者工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="director.html">交互式指导器(interactive director)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="nvl_mode.html">NVL模式教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="input.html">文本输入</a></li>
<li class="toctree-l1"><a class="reference internal" href="side_image.html">头像</a></li>
<li class="toctree-l1"><a class="reference internal" href="rooms.html">画廊、音乐空间和场景回放</a></li>
<li class="toctree-l1"><a class="reference internal" href="drag_drop.html">拖放组件</a></li>
<li class="toctree-l1"><a class="reference internal" href="sprites.html">精灵(sprite)</a></li>
<li class="toctree-l1"><a class="reference internal" href="keymap.html">定制按键映射</a></li>
<li class="toctree-l1"><a class="reference internal" href="achievement.html">成就</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">对话历史</a></li>
<li class="toctree-l1"><a class="reference internal" href="multiple.html">多角色对话</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="statement_equivalents.html">等效语句</a></li>
<li class="toctree-l1"><a class="reference internal" href="save_load_rollback.html">存档、读档和回滚</a></li>
<li class="toctree-l1"><a class="reference internal" href="persistent.html">持久化数据</a></li>
<li class="toctree-l1"><a class="reference internal" href="trans_trans_python.html">Python中的变换(transform)和转场(transition)</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui_advanced.html">高级GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="screen_python.html">界面与Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="modes.html">模式</a></li>
<li class="toctree-l1"><a class="reference internal" href="udd.html">创作者定义的可视组件</a></li>
<li class="toctree-l1"><a class="reference internal" href="cds.html">创作者定义的语句</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_text_tags.html">定制文本标签</a></li>
<li class="toctree-l1"><a class="reference internal" href="character_callbacks.html">角色回调函数</a></li>
<li class="toctree-l1"><a class="reference internal" href="file_python.html">文件读写</a></li>
<li class="toctree-l1"><a class="reference internal" href="color_class.html">Color类</a></li>
<li class="toctree-l1"><a class="reference internal" href="other.html">其他函数和配置变量</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="build.html">生成分发版</a></li>
<li class="toctree-l1"><a class="reference internal" href="updater.html">web更新器</a></li>
<li class="toctree-l1"><a class="reference internal" href="android.html">安卓(Android)</a></li>
<li class="toctree-l1"><a class="reference internal" href="chromeos.html">Chrome OS/Chrome浏览器</a></li>
<li class="toctree-l1"><a class="reference internal" href="ios.html">iOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="iap.html">程序内购</a></li>
<li class="toctree-l1"><a class="reference internal" href="gesture.html">手势</a></li>
<li class="toctree-l1"><a class="reference internal" href="raspi.html">树莓派</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="problems.html">处理故障</a></li>
<li class="toctree-l1"><a class="reference internal" href="environment_variables.html">环境变量</a></li>
<li class="toctree-l1"><a class="reference internal" href="self_voicing.html">自动语音</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="editor.html">集成文本编辑器</a></li>
<li class="toctree-l1"><a class="reference internal" href="skins.html">皮肤</a></li>
<li class="toctree-l1"><a class="reference internal" href="translating_renpy.html">Ren’Py多语言支持</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">完整变更日志</a></li>
<li class="toctree-l1"><a class="reference internal" href="incompatible.html">Incompatible Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="distributor.html">Distributor Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="sponsors.html">Ren’Py Development Sponsors</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="thequestion.html">Script of The Question</a></li>
<li class="toctree-l1"><a class="reference internal" href="thequestion_nvl.html">NVL-模式 “The Question” 脚本</a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="搜索" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">显示图像</a><ul>
<li><a class="reference internal" href="#concepts">一些概念</a><ul>
<li><a class="reference internal" href="#image">图像(image)</a></li>
<li><a class="reference internal" href="#layer">图层(layer)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#defining-images">定义图像(image)</a><ul>
<li><a class="reference internal" href="#images">images文件夹</a></li>
<li><a class="reference internal" href="#image-statement">image语句</a></li>
</ul>
</li>
<li><a class="reference internal" href="#show">show语句</a></li>
<li><a class="reference internal" href="#scene">scene语句</a></li>
<li><a class="reference internal" href="#hide">hide语句</a></li>
<li><a class="reference internal" href="#with">with语句</a><ul>
<li><a class="reference internal" href="#with-none">With None</a></li>
<li><a class="reference internal" href="#sceneshowhidewith">scene、show和hide语句中的with分句</a></li>
</ul>
</li>
<li><a class="reference internal" href="#hideshow">hide和show窗口</a></li>
<li><a class="reference internal" href="#image-functions">图像(image)函数</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="displaying-images">
<span id="id1"></span><h1>显示图像<a class="headerlink" href="#displaying-images" title="Permalink to this headline"> link</a></h1>
<p>若要定义出视觉小说的重点，通过其名字就能得到，重点是“视觉”。Ren’Py中，提供了4种语句用于控制图像显示，并提供了一种模式用于控制图像显示顺序。这些特性可以使视觉小说和叙事性游戏中，合理展示图像变得十分方便。</p>
<p>与图像相关的4种语句分别是：</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">image</span></code> - 定义一个新的图像(image)。</li>
<li><code class="docutils literal notranslate"><span class="pre">show</span></code> - 在图层上(layer)显示一个图像。</li>
<li><code class="docutils literal notranslate"><span class="pre">scene</span></code> -清空图层(layer)，并可选是否在那个图层上显示一个图像。</li>
<li><code class="docutils literal notranslate"><span class="pre">hide</span></code> - 将图层(layer)上的某个图像移除。</li>
</ul>
<p>图像的突然变化显得很突兀，Ren’Py提供了 <code class="docutils literal notranslate"><span class="pre">with</span></code> 语句，可以在场景切换时提供各种效果。</p>
<div class="section" id="concepts">
<span id="id2"></span><h2>一些概念<a class="headerlink" href="#concepts" title="Permalink to this headline"> link</a></h2>
<div class="section" id="image">
<span id="id3"></span><h3>图像(image)<a class="headerlink" href="#image" title="Permalink to this headline"> link</a></h3>
<p>图像(image)是可以使用show语句显示在界面上的一类东西的统称。图像(image)由一个名称和一个可视组件构成。当某个图像展示在某个图层上时，也表示那个图像关联的可视组件显示在图层上。</p>
<p>一个 <em class="dfn">图像名称</em> 可能包含一个或更多字段，由空格分隔。图像名称的第一个字段称作 <em class="dfn">图像标签(tag)</em>。 后面的字段被称作 <em class="dfn">图像属性(attribute)</em>。</p>
<p>举例来说，假设图像名称为 <code class="docutils literal notranslate"><span class="pre">mary</span> <span class="pre">beach</span> <span class="pre">night</span> <span class="pre">happy</span></code> 。图像标签就是 <code class="docutils literal notranslate"><span class="pre">mary</span></code> ，而图像属性(attribute)就是 <code class="docutils literal notranslate"><span class="pre">beach</span></code> 、 <code class="docutils literal notranslate"><span class="pre">night</span></code> 和 <code class="docutils literal notranslate"><span class="pre">happy</span></code> 。</p>
<p>可视组件是可以展现在界面上的一类东西的统称。最常用来展现的是静态图像，只需要以字符串形式给定图片文件名称就可以使用了。在上面的样例中，我们可以使用 <code class="docutils literal notranslate"><span class="pre">&quot;mary_beach_night_happy.png&quot;</span></code> 这样的文件名
除了静态图片之外，图像(image)可以使用 <a class="reference internal" href="displayables.html#displayables"><span class="std std-ref">Ren’Py支持的所有可视组件</span></a> 。 用于显示图像的语句也可以用来显示动画、纯色和其他可视组件。</p>
</div>
<div class="section" id="layer">
<span id="id4"></span><h3>图层(layer)<a class="headerlink" href="#layer" title="Permalink to this headline"> link</a></h3>
<p>图层是一个可以显示在界面上的可视组件列表。Ren’Py支持多图层，包括使用自定义图层。图层(layer)的顺序在游戏内设置(被
<a class="reference internal" href="config.html#var-config.layers"><code class="xref std std-var docutils literal notranslate"><span class="pre">config.layers</span></code></a> 变量控制)， 而图层内可视组件的顺序由scene和show语句的顺序及语句中的特性(property)共同决定。</p>
<p>以下图层由Ren’Py内部定义：</p>
<dl class="docutils">
<dt>master</dt>
<dd>该图层是在scene、show和hide语句中默认使用的图层。master图层主要用于背景和角色精灵(sprite)。</dd>
<dt>transient</dt>
<dd>UI函数使用的默认图层。在每次互动结束后，该图层都会被清空。</dd>
<dt>screens</dt>
<dd>该图层用于界面系统。</dd>
<dt>overlay</dt>
<dd>当UI函数被覆盖(overlay)函数调用时，默认使用的图层。当一个互动行为重新启动时，该图层会被清空。</dd>
</dl>
<p>若需要定义新的图层，可以编写和更新 <a class="reference internal" href="config.html#var-config.layers"><code class="xref std std-var docutils literal notranslate"><span class="pre">config.layers</span></code></a> 等与图层有关的配置变量。使用
<code class="xref py py-func docutils literal notranslate"><span class="pre">renpy.layer_at_list()</span></code> 函数，可以改变图层的特性。</p>
</div>
</div>
<div class="section" id="defining-images">
<span id="id5"></span><h2>定义图像(image)<a class="headerlink" href="#defining-images" title="Permalink to this headline"> link</a></h2>
<p>有两种定义图像(image)的方式。你可以将图片文件放在images文件夹里，或者使用image语句定义一个图像(image)。图像的定义格式比较简单，只要放入目录中的图片文件命名符合转换规则，就能直接转换为图像并使用，还允许使用非图像文件定义图像。</p>
<p>使用image语句的优先级高于通过image文件夹定义的图像。</p>
<div class="section" id="images">
<span id="image-directory"></span><h3>images文件夹<a class="headerlink" href="#images" title="Permalink to this headline"> link</a></h3>
<p>图像文件夹名为“images”，放置在game文件夹下。当一个扩展名为.jpg或者.png的文件被放入这个文件夹时，文件的扩展名会被忽略，文件名的其余部分强制转为小写，最终生成的文件名会被用作图像(image)的名称，前提是那个名称没有在之前其他地方被显示定义过。</p>
<p>这种设计会处理所有images文件夹下的子文件夹。例如，以下所有文件都会被定义为图像(image) <code class="docutils literal notranslate"><span class="pre">eileen</span> <span class="pre">happy</span></code> ：:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">game</span><span class="o">/</span><span class="n">images</span><span class="o">/</span><span class="n">eileen</span> <span class="n">happy</span><span class="o">.</span><span class="n">png</span>
<span class="n">game</span><span class="o">/</span><span class="n">images</span><span class="o">/</span><span class="n">Eileen</span> <span class="n">Happy</span><span class="o">.</span><span class="n">jpg</span>
<span class="n">game</span><span class="o">/</span><span class="n">images</span><span class="o">/</span><span class="n">eileen</span><span class="o">/</span><span class="n">eileen</span> <span class="n">happy</span><span class="o">.</span><span class="n">png</span>
</pre></div>
</div>
</div>
<div class="section" id="image-statement">
<span id="id6"></span><h3>image语句<a class="headerlink" href="#image-statement" title="Permalink to this headline"> link</a></h3>
<p>image语句用于定义图像(image)。一条image语句由以下部分组成：以关键词 <code class="docutils literal notranslate"><span class="pre">image</span></code> 开头的一条逻辑行，后接一个图像名，一个等号(<code class="docutils literal notranslate"><span class="pre">=</span></code>)和一个可视组件。举例：</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">image</span> <span class="n">eileen</span> <span class="n">happy</span> <span class="o">=</span> <span class="s2">&quot;eileen_happy.png&quot;</span>
<span class="k">image</span> <span class="n">black</span> <span class="o">=</span> <span class="s2">&quot;#000&quot;</span>
<span class="k">image</span> <span class="n">bg</span> <span class="n">tiled</span> <span class="o">=</span> <span class="n">LiveTile</span><span class="p">(</span><span class="s2">&quot;tile.jpg&quot;</span><span class="p">)</span>

<span class="k">image</span> <span class="n">eileen</span> <span class="n">happy</span> <span class="n">question</span> <span class="o">=</span> <span class="n">VBox</span><span class="p">(</span>
    <span class="s2">&quot;question.png&quot;</span><span class="p">,</span>
    <span class="s2">&quot;eileen_happy.png&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>如果某个图片文件并不直接放在game目录下，创作者需要给出文件路径。例如，对图片game/eileen/happy.png，需要这样写：</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">image</span> <span class="n">eileen</span> <span class="n">happy</span> <span class="o">=</span> <span class="s2">&quot;eileen/happy.png&quot;</span>
</pre></div>
</div>
<p>image语句在初始化阶段就运行，在开始标签(label)运行或者初始菜单展现之前。就算image语句不放在初始化语句块(block)中，它们依然会获得初始化语句块同样的优先级级别500。</p>
<p>其他信息可以参考 <a class="reference internal" href="atl.html#atl-image-statement"><span class="std std-ref">ATL的image语句变种</span></a> 。</p>
</div>
</div>
<div class="section" id="show">
<span id="show-statement"></span><h2>show语句<a class="headerlink" href="#show" title="Permalink to this headline"> link</a></h2>
<p>show语句用于在某个图层(layer)上显示一个图像(image)。一条show语句由以下部分组成：以关键词 <code class="docutils literal notranslate"><span class="pre">show</span></code> 开头的一条逻辑行，后接一个图像名，以及0个或多个特性(property)。</p>
<p>如果show语句被给定了某个已存在的图像(image)的准确名称，对应的图像就会被显示。如果给定图像名不存在，Ren’Py就会尝试寻找符合以下条件的图像：</p>
<ul class="simple">
<li>在show语句中拥有相同特定标签(tag)。</li>
<li>在show语句中拥有给定的所有属性(attribute)。</li>
<li>若拥有相同标签(tag)的某个图像正被显示，与那个图像共享最大数量的属性(attribute)。</li>
</ul>
<p>若没有任何一个符合条件的图像(image)被找到，就会发生异常。</p>
<p>若带有相同图像标签(tag)的图像已经在图层上显示了，新的图像就会替换原来的图像。否则，该图像会覆盖在同一图层所有其他图像之上。(对设计者来说)图像的相互覆盖顺序可以通过调整zorder和behind特性(property)。</p>
<p>show语句不会触发互动行为。由于图像实际上已经向用户展示，后面必须执行一个能够触发互动行为的(say、menu、pause或with)语句。</p>
<p>show语句可以使用以下特性(property)：</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">as</span></code></dt>
<dd>as特性(property)使用一个名称。当某个图像被显示时，as特性(property)的名称被用作该图像的标签(tag)的别名。这种设计可以让同样的图像在界面上出现两次。</dd>
<dt><code class="docutils literal notranslate"><span class="pre">at</span></code></dt>
<dd><p class="first">at特性(property)使用一个或多个英文逗号分隔的简单表达式。每一个简单表达式必须能换算成一个变换(transform)。变换(transform)被以从左到右的顺序应用到图像上。</p>
<p class="last">如果没有给定at分句的情况下，Ren’Py会保持之前任何已经存在并应用到图像上的变换(transform)。如果不存在任何变换(transform)，图像会使用默认 <a class="reference internal" href="transforms.html#var-default"><code class="xref std std-var docutils literal notranslate"><span class="pre">default</span></code></a>
变换(transform)显示。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">behind</span></code></dt>
<dd>behind特性(property)使用一列英文逗号分隔的变量名。每个变量名都代表一个图像标签(tag)。分句开头变量名指代的图像，显示在带有指定标签(tag)的所有图像之后。</dd>
<dt><code class="docutils literal notranslate"><span class="pre">onlayer</span></code></dt>
<dd>onlayer特性(property)使用一个变量名。在变量名对应的图层(layer)上显示图像。</dd>
<dt><code class="docutils literal notranslate"><span class="pre">zorder</span></code></dt>
<dd>zorder特性(property)使用一个整数值。该整数指定了同一个图层(layer)内各个图像在z轴上的位置。数值越大，图像距离用户越近。zorder主要不是用于Ren’Py游戏中，而对从其他引擎移植过来的视觉小说可能有用。</dd>
</dl>
<p>假设我们定义了如下的图像：:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">image</span> <span class="n">mary</span> <span class="n">night</span> <span class="n">happy</span> <span class="o">=</span> <span class="s2">&quot;mary_night_happy.png&quot;</span>
<span class="k">image</span> <span class="n">mary</span> <span class="n">night</span> <span class="n">sad</span> <span class="o">=</span> <span class="s2">&quot;mary_night_sad.png&quot;</span>
<span class="k">image</span> <span class="n">moon</span> <span class="o">=</span> <span class="s2">&quot;moon.png&quot;</span>
</pre></div>
</div>
<p>show语句样例如下：:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="c1"># 最基础的显示</span>
<span class="k">show</span> <span class="n">mary</span> <span class="n">night</span> <span class="n">sad</span>

<span class="c1"># 由于‘mary night sad’已经显示了，本语句等价于：</span>
<span class="c1"># show mary night happy</span>
<span class="k">show</span> <span class="n">mary</span> <span class="n">happy</span>

<span class="c1"># 在界面右边显示图像</span>
<span class="k">show</span> <span class="n">mary</span> <span class="n">night</span> <span class="n">happy</span> <span class="k">at</span> <span class="n">right</span>

<span class="c1"># 同样的图像显示两次</span>
<span class="k">show</span> <span class="n">mary</span> <span class="n">night</span> <span class="n">sad</span> <span class="k">as</span> <span class="n">mary2</span> <span class="k">at</span> <span class="n">left</span>

<span class="c1"># 在两个图像后面显示图像</span>
<span class="k">show</span> <span class="n">moon</span> <span class="k">behind</span> <span class="n">mary</span><span class="p">,</span> <span class="n">mary2</span>

<span class="c1"># 在用户自定义的图层上显示图像</span>
<span class="k">show</span> <span class="n">moon</span> <span class="k">onlayer</span> <span class="n">user_layer</span>
</pre></div>
</div>
<p><strong>Show 表达式。</strong>
show语句的一个变种，使用关键词 <code class="docutils literal notranslate"><span class="pre">expression</span></code> 代替图像名，后面跟一个简单表达式。表达式必须能解析为一个可视组件，而该可视组件会在图层上显示。若要隐藏该可视组件，必须使用as语句指定一个图像标签(tag)。</p>
<p>举例:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">show</span> <span class="k">expression</span> <span class="s2">&quot;moon.png&quot;</span> <span class="k">as</span> <span class="n">moon</span>
</pre></div>
</div>
<p><strong>Show Layer.</strong>
show layer语句允许我们将某个变换(transform)或者ATL变换(transform)应用于整个图层(layer)，比如“master”图层上。语法如下：:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">show</span> <span class="na">layer</span> <span class="n">master</span> <span class="k">at</span> <span class="n">flip</span>
</pre></div>
</div>
<p>或：:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">show</span> <span class="na">layer</span> <span class="n">master</span><span class="p">:</span>
    <span class="na">xalign</span> <span class="mf">0.5</span> <span class="na">yalign</span> <span class="mf">0.5</span> <span class="na">rotate</span> <span class="mi">180</span>
</pre></div>
</div>
<p>若要停用图层上的格式，则使用：:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">show</span> <span class="na">layer</span> <span class="n">master</span>
</pre></div>
</div>
</div>
<div class="section" id="scene">
<span id="scene-statement"></span><h2>scene语句<a class="headerlink" href="#scene" title="Permalink to this headline"> link</a></h2>
<p>scene语句会移除图层(layer)上所有的可视组件，并在该图层上显示一个图像。场景语句开头是关键词 <code class="docutils literal notranslate"><span class="pre">scene</span></code> ，后面跟一个图像名，最后可能有若干个特性(property)。scene语句中，图像的显示方式和特性的使用效果与show语句一致。</p>
<p>scene语句经常用于，在背景图层上显示一个图像。例如:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">scene</span> <span class="n">bg</span> <span class="n">beach</span>
</pre></div>
</div>
<p><strong>scene表达式。</strong>
与show语句类似，场景语句也能使用表达式代替图像名。</p>
<p><strong>清空图层。</strong>
如果图像名为空，scene语句会清空图层上所有可视组件，并且不会显示任何东西。</p>
</div>
<div class="section" id="hide">
<span id="hide-statement"></span><h2>hide语句<a class="headerlink" href="#hide" title="Permalink to this headline"> link</a></h2>
<p>hide语句将一个图像从图层中移除。该语句以关键词 <code class="docutils literal notranslate"><span class="pre">hide</span></code> 开头，后跟一个图像名，再后面可能包含一个特性(property)。hide语句从图片名中获取图片标签(tag)，并将图层上该标签(tag)所对应的所有图像都移除。</p>
<p>hide语句很少用到。如果一个精灵(sprite)表示一个角色，那么只有当角色离开场景时hide语句才会被用到。当角色改变表情时，使用show语句更好，因为显示语句会自动替换带有同名标签(tag)的角色图片。</p>
<p>hide语句拥有以下特性(property):</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">onlayer</span></code></dt>
<dd>该特性拥有一个变量名。隐藏该变量名对应图层(layer)上的图像(iamge)。</dd>
</dl>
<p>举例:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">e</span> <span class="s2">&quot;我要离开这里。&quot;</span>

<span class="k">hide</span> <span class="n">eileen</span>
</pre></div>
</div>
<p>下面这段是反例，请勿模仿这种写法:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">hide</span> <span class="n">eileen</span>
<span class="k">show</span> <span class="n">eileen</span> <span class="n">happy</span>
</pre></div>
</div>
<p>正确的写法是:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">show</span> <span class="n">eileen</span> <span class="n">happy</span>
</pre></div>
</div>
</div>
<div class="section" id="with">
<span id="with-statement"></span><h2>with语句<a class="headerlink" href="#with" title="Permalink to this headline"> link</a></h2>
<p>with语句用于在场景切换时应用转场(transition)效果，使得图像的出现和隐去不显得突兀。with语句以关键词 <code class="docutils literal notranslate"><span class="pre">with</span></code> 开头，后跟一个简单表达式，该简单表达式可以转换为一个转场(transition)对象或者特殊值  <code class="docutils literal notranslate"><span class="pre">None</span></code> 。</p>
<p>转场(transition)效果会被应用于某次互动行为后上一个界面所有内容的消隐，跟show和hide语句执行后新界面的展现之间。</p>
<p>with语句会触发等待一个互动行为。该互动行为存在期间由用户控制，用户可以通过互动更快结束这个过程。</p>
<p>所有可用的转场(transition)效果列表，详见
<a class="reference internal" href="transitions.html#transitions"><span class="std std-ref">转场</span></a>.</p>
<p>with语句的样例:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">show</span> <span class="n">bg</span> <span class="n">washington</span>
<span class="k">with</span> <span class="n">dissolve</span>

<span class="k">show</span> <span class="n">eileen</span> <span class="n">happy</span> <span class="k">at</span> <span class="n">left</span>
<span class="k">show</span> <span class="n">lucy</span> <span class="n">mad</span> <span class="k">at</span> <span class="n">right</span>
<span class="k">with</span> <span class="n">dissolve</span>
</pre></div>
</div>
<p>这段脚本触发了两段过渡(transitions)效果。第一个with语句使用 <code class="docutils literal notranslate"><span class="pre">dissolve</span></code> 效果将界面场景切换至背景“washington”。( <code class="docutils literal notranslate"><span class="pre">dissolve</span></code> 默认为历时0.5秒的溶解效果。)</p>
<p>第二个with语句在Eileen和Lucy出场之后使用了转场(transition)效果。这条语句使得原本只包含背景画面的场景切换到包含三个图像的场景——新登场的两个角色图像一齐使用溶解效果出现。</p>
<div class="section" id="with-none">
<span id="id7"></span><h3>With None<a class="headerlink" href="#with-none" title="Permalink to this headline"> link</a></h3>
<p>在上述的例子中，使用了两次dissolve效果。但如果我们希望背景即刻出现，而角色登场使用dissolve效果的话，应该怎样做？在第一个with语句中只是不带任何值的话，3个图像依然会使用dissolve效果显示——我们需要一种方式声明背景需要立刻出现。</p>
<p>with语句使用特殊值 <code class="docutils literal notranslate"><span class="pre">None</span></code> ，就可以满足我们的要求。 <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">None</span></code> 语句会简单地触发一个互动行为，不改变用户所看到的画面。当下一个转场(transition)发生时，这种效果会从with None语句定义的语句块开始直到互动行为完成。</p>
<p>例如，这段脚本:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">show</span> <span class="n">bg</span> <span class="n">washington</span>
<span class="k">with</span> <span class="bp">None</span>

<span class="k">show</span> <span class="n">eileen</span> <span class="n">happy</span> <span class="k">at</span> <span class="n">left</span>
<span class="k">show</span> <span class="n">lucy</span> <span class="n">mad</span> <span class="k">at</span> <span class="n">right</span>
<span class="k">with</span> <span class="n">dissolve</span>
</pre></div>
</div>
<p>只有一个转场(transition)效果发生，发生在只有背景“washington”到背景加两个角色的场景。</p>
</div>
<div class="section" id="sceneshowhidewith">
<span id="with-clause-of-scene-show-and-hide-statements"></span><h3>scene、show和hide语句中的with分句<a class="headerlink" href="#sceneshowhidewith" title="Permalink to this headline"> link</a></h3>
<p>scene、show和hide语句可以带一个with分句，该分句使得图片的显示和隐藏可以直接关联一个转场(transition)效果。with分句跟在其他语句的同一个逻辑行结尾，以关键词 <code class="docutils literal notranslate"><span class="pre">with</span></code> 开头，后接一个简单表达式。</p>
<p>with分句等效于在原有语句前面先加了一行 <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">None</span></code> 语句，附加分句的过渡效果相当于原有语句后加了一行with语句 <a class="reference internal" href="#with-statement"><span class="std std-ref">with 语句</span></a>。举例：:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">show</span> <span class="n">eileen</span> <span class="n">happy</span> <span class="k">at</span> <span class="n">left</span> <span class="k">with</span> <span class="n">dissolve</span>
<span class="k">show</span> <span class="n">lucy</span> <span class="n">mad</span> <span class="k">at</span> <span class="n">right</span> <span class="k">with</span> <span class="n">dissolve</span>
</pre></div>
</div>
<p>等效于:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="bp">None</span>
<span class="k">show</span> <span class="n">eileen</span> <span class="n">happy</span> <span class="k">at</span> <span class="n">left</span>
<span class="k">with</span> <span class="n">dissolve</span>

<span class="k">with</span> <span class="bp">None</span>
<span class="k">show</span> <span class="n">lucy</span> <span class="n">mad</span> <span class="k">at</span> <span class="n">right</span>
<span class="k">with</span> <span class="n">dissolve</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="hideshow">
<span id="hide-and-show-window"></span><h2>hide和show窗口<a class="headerlink" href="#hideshow" title="Permalink to this headline"> link</a></h2>
<p>当某个角色不处于发言状态时，window语句用于控制窗口显示。(例如，在过渡效果或者暂停状态下。)window show语句显示窗口，而window hide语句隐藏窗口。</p>
<p>转场(transition)效果是可选的，若指定了过渡效果，就会应用在窗口的显示和隐藏。若没有指定，默认使用 <a class="reference internal" href="config.html#var-config.window_show_transition"><code class="xref std std-var docutils literal notranslate"><span class="pre">config.window_show_transition</span></code></a> 和
<a class="reference internal" href="config.html#var-config.window_hide_transition"><code class="xref std std-var docutils literal notranslate"><span class="pre">config.window_hide_transition</span></code></a> 的值。指定None则不使用任何过渡效果。</p>
<p>窗口自身可以通过调用 <a class="reference internal" href="config.html#var-config.empty_window"><code class="xref std std-var docutils literal notranslate"><span class="pre">config.empty_window</span></code></a> 显示。 窗口默认旁白说了一句话，内容为空字符串。:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span>
    <span class="k">show</span> <span class="n">bg</span> <span class="n">washington</span>
    <span class="k">show</span> <span class="n">eileen</span> <span class="n">happy</span>
    <span class="k">with</span> <span class="n">dissolve</span>

    <span class="k">window</span> <span class="k">show</span> <span class="n">dissolve</span>

    <span class="s2">&quot;我可以说话……&quot;</span>

    <span class="k">show</span> <span class="n">eileen</span> <span class="n">happy</span> <span class="k">at</span> <span class="n">right</span>
    <span class="k">with</span> <span class="n">move</span>

    <span class="s2">&quot;……和移动，在窗口显示的情况下。&quot;</span>

    <span class="k">window</span> <span class="k">hide</span> <span class="n">dissolve</span>
</pre></div>
</div>
</div>
<div class="section" id="image-functions">
<span id="id8"></span><h2>图像(image)函数<a class="headerlink" href="#image-functions" title="Permalink to this headline"> link</a></h2>
<dl class="function">
<dt id="renpy.can_show">
<code class="descclassname">renpy.</code><code class="descname">can_show</code><span class="sig-paren">(</span><em>name</em>, <em>layer=None</em>, <em>tag=None</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.can_show" title="Permalink to this definition"> link</a></dt>
<dd><p>该函数判断入参 <em>name</em> 代表的图像是否能显示。函数把入参 <em>name</em> 看做一个图像标签(tag)和属性(attribute)。该函数依据目前正显示在 <em>图层</em> 上的所有 <em>tag</em> 来尝试确认唯一的图像。若存在唯一可显示图像，则以元组形式返回图像名。否则返回None。</p>
<dl class="docutils">
<dt><cite>tag</cite></dt>
<dd>图像标签(tag)属性。若为空，默认使用入参name的第一个组件。</dd>
<dt><cite>layer</cite></dt>
<dd>需要确认的图层(layer)名。若为空，则默认使用 <em>tag</em> 所在图层。</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="renpy.check_image_attributes">
<code class="descclassname">renpy.</code><code class="descname">check_image_attributes</code><span class="sig-paren">(</span><em>tag</em>, <em>attributes</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.check_image_attributes" title="Permalink to this definition"> link</a></dt>
<dd><p>根据给定的tag和attributes检查是否存在唯一图像。若存在，按顺序返回图像属性(attribute)。否则返回None。</p>
</dd></dl>

<dl class="function">
<dt id="renpy.copy_images">
<code class="descclassname">renpy.</code><code class="descname">copy_images</code><span class="sig-paren">(</span><em>old</em>, <em>new</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.copy_images" title="Permalink to this definition"> link</a></dt>
<dd><p>复制图像，并更换新图像的前缀名。样例：</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">renpy</span><span class="o">.</span><span class="n">copy_images</span><span class="p">(</span><span class="s2">&quot;eileen&quot;</span><span class="p">,</span> <span class="s2">&quot;eileen2&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>将复制所有以“eileen”开头的图像并创建以“eileen2”开头的新图像。若“eileen happy”存在，则创建“eileen2 happy”。</p>
<dl class="docutils">
<dt><cite>old</cite></dt>
<dd>原图片名的字符串，图片名各部分以空格分隔。</dd>
<dt><cite>new</cite></dt>
<dd>新图片名的字符串，图片名各部分以空格分隔。</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="renpy.get_attributes">
<code class="descclassname">renpy.</code><code class="descname">get_attributes</code><span class="sig-paren">(</span><em>tag</em>, <em>layer=None</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.get_attributes" title="Permalink to this definition"> link</a></dt>
<dd><p>根据入参图片标签 <em>tag</em> ，返回对应图像属性(attribute)的元组。若图像整在显示，则返回None。</p>
<dl class="docutils">
<dt><cite>layer</cite></dt>
<dd>待检图层(layer)。若为空，使用 <em>tag</em> 所在的默认图层。</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="renpy.get_ordered_image_attributes">
<code class="descclassname">renpy.</code><code class="descname">get_ordered_image_attributes</code><span class="sig-paren">(</span><em>tag</em>, <em>attributes=()</em>, <em>sort=None</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.get_ordered_image_attributes" title="Permalink to this definition"> link</a></dt>
<dd><p>返回图像标签(tag)列表，按照对用户来说合理的方式排序。</p>
<dl class="docutils">
<dt><cite>attributes</cite></dt>
<dd>若该值不为空，只寻找与给定属性(attribute)兼容的结果。(兼容的意思是，各类属性在同一时间里能找到对应唯一图像。)</dd>
<dt><cite>sort</cite></dt>
<dd>若不为None，返回的属性(attribute)列表就是排序后的。该函数应当用作中断器(tiebreaker)。</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="renpy.get_placement">
<code class="descclassname">renpy.</code><code class="descname">get_placement</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.get_placement" title="Permalink to this definition"> link</a></dt>
<dd><p>该函数获取到可视组件d的位置。返回的位置信息可信度很低，因为可视组件在渲染后可能被改变了，也可能可视组件在首次渲染之前根本不存在。</p>
<p>该函数返回的对象包含以下字段(field)，每一个都对应一项样式特性(property)：</p>
<p><strong>- xpos</strong>
<strong>- xanchor</strong>
<strong>- xoffset</strong>
<strong>- ypos</strong>
<strong>- yanchor</strong>
<strong>- yoffset</strong>
<strong>- subpixel</strong></p>
</dd></dl>

<dl class="function">
<dt id="renpy.get_say_image_tag">
<code class="descclassname">renpy.</code><code class="descname">get_say_image_tag</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#renpy.get_say_image_tag" title="Permalink to this definition"> link</a></dt>
<dd><p>返回当前发言角色对应的图像标签(tag)(角色获得的图像入参)。如果当前没有角色发言或当前发言角色没有对应的图像标签(tag)则返回None。</p>
</dd></dl>

<dl class="function">
<dt id="renpy.get_showing_tags">
<code class="descclassname">renpy.</code><code class="descname">get_showing_tags</code><span class="sig-paren">(</span><em>layer='master'</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.get_showing_tags" title="Permalink to this definition"> link</a></dt>
<dd><p>返回入参 <em>layer</em> 图层上显示的所有图像标签(tag)的集。</p>
</dd></dl>

<dl class="function">
<dt id="renpy.has_image">
<code class="descclassname">renpy.</code><code class="descname">has_image</code><span class="sig-paren">(</span><em>name</em>, <em>exact=False</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.has_image" title="Permalink to this definition"> link</a></dt>
<dd><p>若入参name为名的图像存在返回真(true)，若不存在返回假(false)。</p>
<dl class="docutils">
<dt><cite>name</cite></dt>
<dd>一个图像名的字符串，或者图像名各组件的元组。</dd>
<dt><cite>exact</cite></dt>
<dd>只有跟name全匹配的图像名存在时才返回真(true)——部分匹配则返回假(false)。</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="renpy.seen_image">
<code class="descclassname">renpy.</code><code class="descname">seen_image</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.seen_image" title="Permalink to this definition"> link</a></dt>
<dd><p>若名为name的图像在用户系统中至少被看到过一次，就返回真(true)。图像被看到的定义是，其在show、scene语句或者renpy.show()函数中出现过。(注意这里的“被看到”并不意味着真的被用户看见过，比如show语句后面马上跟一个hide语句的情况也属于“被看到”过。)</p>
</dd></dl>

<dl class="function">
<dt id="renpy.showing">
<code class="descclassname">renpy.</code><code class="descname">showing</code><span class="sig-paren">(</span><em>name</em>, <em>layer='master'</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.showing" title="Permalink to this definition"> link</a></dt>
<dd><p>若与name同名标签的图像整在图层  <em>layer</em> 上显示，则返回真(true)。</p>
<dl class="docutils">
<dt><cite>image</cite></dt>
<dd>可能是一个给定图像名的字符串，或者给定图像名各组件的元组。还可以只是给定图像标签(tag)的字符串。</dd>
<dt><cite>layer</cite></dt>
<dd>待检图层(layer)。若为None，使用 <em>tag</em> 所在默认图层。</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="renpy.start_predict">
<code class="descclassname">renpy.</code><code class="descname">start_predict</code><span class="sig-paren">(</span><em>*args</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.start_predict" title="Permalink to this definition"> link</a></dt>
<dd><p>该函数接受一个或多个可视组件作为入参。该函数触发Ren’Py在每次交互行为中预加载入参中的可视组件，直到使用renpy.stop_predict()移除预加载的那些可视组件。</p>
</dd></dl>

<dl class="function">
<dt id="renpy.stop_predict">
<code class="descclassname">renpy.</code><code class="descname">stop_predict</code><span class="sig-paren">(</span><em>*args</em><span class="sig-paren">)</span><a class="headerlink" href="#renpy.stop_predict" title="Permalink to this definition"> link</a></dt>
<dd><p>该函数接受一个或多个可视组件作为入参。该函数触发Ren’Py停止在每次互动行为中预加载入参中的可视组件。</p>
</dd></dl>

</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">返回顶部</a>
      
    </p>
    <p>
        &copy; Copyright 2012-2018, Tom Rothamel.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.<br/>
    </p>
  </div>
</footer>
  </body>
</html>